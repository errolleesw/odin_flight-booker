<p style="color: green"><%= notice %></p>
<h1>Search Flights</h1>
<%= form_tag flights_path, method: :get do %>
  <div>
    <%= label_tag :from, 'From' %>
    <%= text_field_tag :from, params[:from] %>
  </div>
  <div>
    <%= label_tag :to, 'To' %>
    <%= text_field_tag :to, params[:to] %>
  </div>
  <div>
    <%= label_tag :date, 'Date' %>
    <%= text_field_tag :date, params[:date] %>
  </div>
  <%= submit_tag 'Search' %>
<% end %>
<h1>Flights</h1>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>Flight Number</th>
      <th>Airline ID</th>
      <th>Origin ID</th>
      <th>Destination ID</th>
      <th>Departure Time</th>
      <th>Arrival Time</th>
      <th>Duration</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @flights.each do |flight| %>
      <tr>
        <td><%= flight.id %></td>
        <td><%= flight.flight_number %></td>
        <td><%= flight.airline_name %></td>
        <td><%= "#{flight.origin_code} | #{flight.origin_name}" %></td>
        <td><%= "#{flight.destination_code} | #{flight.destination_name}" %></td>
        <td><%= flight.departure_time.strftime("%-d %b %y %H:%M") %></td>
        <td><%= flight.arrival_time.strftime("%-d %b %y %H:%M") %></td>
        <td><%= sprintf("%.1f", flight.duration/60.0) %></td>
        <td><%= link_to 'Show', flight %></td>
        <td><%= link_to 'Edit', edit_flight_path(flight) %></td>
        <td><%= link_to 'Delete', flight, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
  <%= link_to "New flight", new_flight_path %>
